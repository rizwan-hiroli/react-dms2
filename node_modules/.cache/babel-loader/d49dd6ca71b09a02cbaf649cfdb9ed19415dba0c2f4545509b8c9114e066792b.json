{"ast":null,"code":"import{useEffect,useRef,useState}from\"react\";import{EmployeeCard}from\"./EmployeeCard\";import{deleteEmployeeById,getAllEmployees,getEmployeesByName}from\"../model/EmployeeCRUD\";import{useLoaderData}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function NeoEmployees(){const nameNode=useRef();const data=useLoaderData();let[employees,setEmployees]=useState(data);let[errorMessage,setMessage]=useState(\"\");async function getEmps(){const data=await getAllEmployees();setEmployees(data);}async function deleteEmployee(_id){const ans=window.confirm(\"Do you really want to delete?\");if(ans){const data=await deleteEmployeeById(_id);window.alert(\"Employee deleted successfully....\");getEmps();}}async function searchEmp(emp_name){if(emp_name!==\"\"){const data=await getEmployeesByName(emp_name);if(data.length>0)setEmployees(data);else setMessage(\"NOT FOUND\");}else{setMessage(\"\");setEmployees(data);}}useEffect(()=>{//    console.log(employees);\n//    getEmps();\n}/* ,[] */);const employeeCards=employees.map((employee,i)=>/*#__PURE__*/_jsx(EmployeeCard,{employee:employee,deleteEmployee:deleteEmployee},'e'+i));return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"col-md-12 pt-5 pb-5\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card-header\",children:\"All Employees\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"m-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Employee name to search:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:nameNode,onKeyUp:()=>searchEmp(nameNode.current.value)}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-danger text-bold\",children:[\" \",errorMessage]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:employeeCards})]})]})})})})});}","map":{"version":3,"names":["useEffect","useRef","useState","EmployeeCard","deleteEmployeeById","getAllEmployees","getEmployeesByName","useLoaderData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NeoEmployees","nameNode","data","employees","setEmployees","errorMessage","setMessage","getEmps","deleteEmployee","_id","ans","window","confirm","alert","searchEmp","emp_name","length","employeeCards","map","employee","i","children","class","className","type","ref","onKeyUp","current","value"],"sources":["/home/neosoft/Desktop/react-dms2/src/components/NeoEmployees.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { EmployeeCard } from \"./EmployeeCard\";\nimport { deleteEmployeeById, getAllEmployees, getEmployeesByName } from \"../model/EmployeeCRUD\";\nimport { useLoaderData } from \"react-router-dom\";\n\n\nexport function NeoEmployees(){\n    const nameNode=useRef();\n    const data=useLoaderData();\n    let [employees, setEmployees]=useState(data); \n    let [errorMessage, setMessage]=useState(\"\");\n    async function getEmps(){\n        const data=await getAllEmployees();\n        setEmployees(data);\n    }\n    async function deleteEmployee(_id){\n        const ans=window.confirm(\"Do you really want to delete?\");\n        if(ans){\n            const data=await deleteEmployeeById(_id);\n            window.alert(\"Employee deleted successfully....\");\n            getEmps();    \n        }\n    }  \n    async function  searchEmp(emp_name){\n        if(emp_name!==\"\")\n        {\n            const data=await getEmployeesByName(emp_name);\n            if(data.length>0)\n                setEmployees(data);\n            else\n                setMessage(\"NOT FOUND\");\n        }\n        else{\n            setMessage(\"\");\n            setEmployees(data);\n        }\n            \n            \n    }\n    useEffect(()=>{ \n    //    console.log(employees);\n    //    getEmps();\n    }/* ,[] */)\n\n    const employeeCards=employees.map((employee, i)=><EmployeeCard key={'e'+i} employee={employee} deleteEmployee={deleteEmployee}></EmployeeCard>)\n    return(\n        <>\n        <div class=\"container\">\n            <div class=\"row justify-content-center\">\n                <div class=\"col-md-12 pt-5 pb-5\">\n                    <div class=\"card\">\n                        <div class=\"card-header\">All Employees</div>\n\n                        <div class=\"card-body\">\n                            <section className=\"m-2\">\n                                <label>Employee name to search:</label>\n                                <input type=\"text\" ref={nameNode} onKeyUp={()=>searchEmp(nameNode.current.value)}></input>\n                                <span className=\"text-danger text-bold\"> {errorMessage}</span>\n                            </section>\n                            <div className=\"row\">\n                                {employeeCards}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        </>\n      \n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}